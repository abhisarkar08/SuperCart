import{u as V,m as H,r as j,a as T,c as y,j as e,n as b,o as J,p as R,q as B,s as L,t as U,v as W,i as $,y as N}from"./index-s5-8Nuyt.js";import{u as G}from"./index.esm-B8fhGF0i.js";import{a as Y,b as _}from"./index-BPptEMCf.js";const Z=()=>{const v=V(),h=H(),m=h.state?.quantity||1,{register:l,handleSubmit:w,setValue:x,reset:F,formState:{errors:o}}=G(),[c,S]=j.useState(0),[p,C]=j.useState(0),{id:P}=T(),k=y(s=>s.productReducer.products),E=y(s=>s.userReducer?.data),a=k?.find(s=>s.id==Number(P)),i=h.state,n=i?.cartItems||[];i?.tax,i?.grandTotal;const d=[{name:"Fast Delivery",price:"₹30",des:"Within 6 Hours",icon:e.jsx(b,{color:"gray"})},{name:"Standard Delivery",price:"₹20",des:"In 2-3 Hours",icon:e.jsx(U,{color:"#0084D1"})},{name:"Eco Delivery",price:"₹10",des:"In 4-5 Hours",icon:e.jsx(W,{color:"green"})}],f=[{name:"Mastercard",img:"https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg"},{name:"Visa",img:"https://upload.wikimedia.org/wikipedia/commons/0/04/Visa.svg"},{name:"PayPal",img:"https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg"},{name:"Apple Pay",img:"https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg"},{name:"Google Pay",img:"https://play-lh.googleusercontent.com/HArtbyi53u0jnqhnnxkQnMx9dHOERNcprZyKnInd2nrfM7Wd9ivMNTiz7IJP6-mSpwk"},{name:"UPI",img:"https://upload.wikimedia.org/wikipedia/commons/e/e1/UPI-Logo-vector.svg"}],I=Number((Number(a?.price||0)*87*m).toFixed(2)),q=parseFloat(d[c].price.replace("₹","")),u=10,D=I+q+u,A=i?.isDirectBuy||!1,O=async s=>{const t=JSON.parse(localStorage.getItem("orders"))||[];let g=[];if(n&&n.length>0)g=n.map(r=>({id:r.id,name:r.title||r.name,image:r.thumbnail||r.image,quantity:r.quantity,price:r.price,delivery:d[c]?.name||"Standard Delivery",total:D,date:new Date().toISOString(),isDirectBuy:!1,userId:JSON.parse(localStorage.getItem("user"))?.id||null}));else if(a){const r=(a.price||0)*87;g=[{id:a.id,name:a.title||a.name,image:a.thumbnail||a.image,quantity:m,price:a.price,delivery:d[c]?.name||"Standard Delivery",total:r*m+u+parseFloat(d[c].price.replace("₹","")),date:new Date().toISOString(),isDirectBuy:A,userId:JSON.parse(localStorage.getItem("user"))?.id||null}]}localStorage.setItem("orders",JSON.stringify([...t,...g]));try{for(let r of g)await $.post("/orders",r);N.success("Order placed!")}catch{N.error("Order placed locally but not saved on server!")}F()},M=()=>{const s=E;s&&(x("country",s.count||""),x("city",s.city||""),x("area",s.area||""),x("street",s.add||""),x("code",s.code||""))};return e.jsxs("div",{className:"text-black w-screen pt-5 -mx-[18px] px-5 bg-[#FEFFFF]",children:[e.jsxs("div",{className:"flex flex-col gap-4 mb-[4rem] max-w-[1280px] mx-auto",children:[e.jsx("div",{children:e.jsxs("button",{onClick:()=>v("/cart"),className:"flex flex-row items-center gap-2 hover:bg-gray-200 transition-colors duration-200 p-1.5 cursor-pointer rounded-xl text-lg font-normal",children:[e.jsx(Y,{}),"Back to Cart"]})}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Checkout"}),e.jsx("h1",{className:"text-base font-normal opacity-70",children:"Complete your purchase securely"})]})]}),e.jsxs("section",{className:"flex flex-col gap-10 lg:flex-row-reverse  max-w-[1280px] w-full mx-auto",children:[e.jsxs("div",{className:"flex flex-col gap-2 p-[2rem] rounded-xl mb-[1rem] bg-white max-w-[958px] shadow-xl lg:max-w-[405px] max-h-[315px] w-full",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2 text-base font-semibold mb-3",children:[e.jsx(_,{}),e.jsx("h1",{children:"Order Summary"})]}),e.jsx("hr",{className:"border-gray-400 opacity-50"}),e.jsxs("div",{className:"flex flex-col gap-2.5 text-sm my-2",children:[e.jsxs("div",{className:"flex flex-row justify-between font-semibold",children:[e.jsx("h1",{className:"opacity-40 font-normal",children:"Subtotal"}),e.jsxs("p",{children:["₹",n.length>0?i.total.toFixed(2):(Number(a?.price||0)*87*m).toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-row justify-between font-semibold",children:[e.jsx("h1",{className:"opacity-40 font-normal",children:"Delivery"}),e.jsx("p",{children:d[c].price})]}),e.jsxs("div",{className:"flex flex-row justify-between font-semibold",children:[e.jsx("h1",{className:"opacity-40 font-normal",children:"Tax"}),e.jsxs("p",{children:["₹",n.length?i.tax:u]})]})]}),e.jsx("hr",{className:"border-gray-400 opacity-50"}),e.jsxs("div",{className:"flex flex-row justify-between my-2 text-lg font-medium",children:[e.jsx("h1",{children:"Total"}),e.jsxs("h1",{children:["₹",n.length?(i.total+i.tax+parseFloat(d[c].price.replace("₹",""))).toFixed(2):((a?.price||0)*87*m+u+parseFloat(d[c].price.replace("₹",""))).toFixed(2)]})]}),e.jsxs("div",{className:"flex flex-row gap-3 justify-center",children:[e.jsx("input",{className:"flex-1 bg-gray-100 p-3 text-sm rounded-lg font-normal",placeholder:"Enter Coupen Code"}),e.jsx("button",{className:"bg-gray-100 p-2 rounded-lg cursor-pointer text-sm",children:"Apply"})]})]}),e.jsx("div",{className:"max-w-[958px] lg:max-w-[842px] w-full",children:e.jsxs("form",{onSubmit:w(O),children:[e.jsxs("div",{className:"p-[2rem] rounded-2xl bg-white mb-[3rem] shadow-lg",children:[e.jsxs("div",{className:"flex flex-row text-lg items-center gap-2 mb-4 font-medium",children:[e.jsx(b,{}),e.jsx("h1",{children:"Delivery Option"})]}),e.jsx("div",{className:"grid grid-row-3 gap-4 md:grid-cols-2 ",children:d.map((s,t)=>e.jsxs("div",{onClick:()=>S(t),className:`flex flex-row gap-5 p-3 border justify-between rounded-xl cursor-pointer hover:shadow-lg transition ${c===t?"border border-[#5498FF] bg-[#EFF6FF]":"border-gray-200 hover:shadow-lg"}`,children:[e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("div",{className:"flex justify-center text-xl items-start mt-1",children:s.icon}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium",children:s.name}),e.jsx("span",{className:"text-xs font-normal opacity-60",children:s.des})]}),e.jsx("span",{className:"text-base font-medium",children:s.price})]})]}),e.jsx(J,{className:`${c===t?"text-blue-500":"text-gray-300"}`})]},t))})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-lg",children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx(R,{className:"text-red-400"}),e.jsx("h1",{className:"text-xl font-medium",children:"Shipping Information"})]}),e.jsxs("div",{className:"flex flex-col gap-2 my-[1.5rem]",children:[e.jsxs("div",{className:"grid grid-rows gap-2 md:grid-cols-2 md:gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"Country"}),e.jsx("input",{...l("country",{required:!0}),type:"text",placeholder:"Country",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.country&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter Country"})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"City"}),e.jsx("input",{...l("city",{required:!0}),type:"text",placeholder:"City",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.city&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter City"})]})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"Street Address"}),e.jsx("input",{...l("street",{required:!0}),type:"text",placeholder:"Street Address",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.street&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter Street Address"})]}),e.jsxs("div",{className:"grid grid-rows gap-2 md:grid-cols-2 md:gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"Area"}),e.jsx("input",{...l("area",{required:!0}),type:"text",placeholder:"area",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.area&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter Area"})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"Postal Code"}),e.jsx("input",{...l("code",{required:!0}),type:"number",placeholder:"Postal Code",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.code&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter Postal Code"})]})]}),e.jsx("hr",{className:"border-gray-400 opacity-50 my-[1rem] "}),e.jsxs("button",{type:"button",onClick:M,className:"flex flex-row gap-2 items-center text-sm font-medium opacity-60 cursor-pointer",children:[e.jsx(B,{}),e.jsx("h1",{children:"Use Saved Address"})]})]})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl my-[2.5rem] shadow-lg",children:[e.jsxs("div",{className:"flex flex-row gap-2 text-base font-medium items-center",children:[e.jsx(L,{className:"text-blue-500"}),e.jsx("h1",{children:"Payment Method"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-1 mt-[2rem] md:grid-cols-4 lg:grid-cols-6",children:f.map((s,t)=>e.jsxs("div",{onClick:()=>C(t),className:`flex flex-col items-center justify-center w-full h-[83px]  max-w-[217px] border-1 rounded-xl cursor-pointer hover:shadow-lg transition ${p===t?"border border-[#5498FF] bg-[#EFF6FF]":"border-gray-200 hover:shadow-lg"}`,children:[e.jsx("img",{src:s.img,alt:s.name,className:"h-5 mb-2"}),e.jsx("span",{className:"text-xs font-medium xl:text-sm",children:s.name})]},t))}),p===0||p===1?e.jsxs("div",{className:"flex flex-col gap-5 mt-[2.5rem] mb-[1rem]",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"Name"}),e.jsx("input",{...l("name",{required:!0}),type:"text",placeholder:"Name",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.street&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter Name"})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"Card Number"}),e.jsx("input",{...l("card",{required:!0}),type:"number",placeholder:"1234 5678 9012 3456",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.street&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter Card Number"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"Expiry Date"}),e.jsx("input",{...l("exp",{required:!0}),type:"number",placeholder:"MM/YY",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.street&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter Expiry Date"})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("label",{className:"text-sm font-medium opacity-70",children:"CVV"}),e.jsx("input",{...l("cvv",{required:!0}),type:"number",placeholder:"CVV",className:"p-2 text-sm font-normal border-1 border-gray-300 bg-gray-100 rounded-lg"}),o.street&&e.jsx("p",{className:"text-xs text-red-500 font-normal",children:"Please Enter CVV"})]})]})]}):null,e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",className:"bg-black text-white p-2 mt-[1rem] font-normal cursor-pointer rounded-lg text-sm",children:["Pay with ",p!==null?f[p].name:"GPay"]})})]}),e.jsx("div",{})]})})]})]})};export{Z as default};
